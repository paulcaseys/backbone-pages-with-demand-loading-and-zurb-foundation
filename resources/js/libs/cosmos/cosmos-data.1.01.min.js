(function(){var e;var t=function(){};var n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"];var r=n.length;var i=window.console=window.console||{};while(r--){e=n[r];if(!i[e]){i[e]=t}}})();if(!window.Cosmos){window.Cosmos={}}if(!window.Cosmos.Data){window.Cosmos.Data={}}if(!window.Cosmos.Project){window.Cosmos.Project={}}if(!window.Cosmos.Config){window.Cosmos.Config={};window.Cosmos.Config.ReferenceDataArray=["detail_MessageId","detail_ImageFile","detail_ImageDescription","detail_DateReceived","detail_Name","detail_FirstName","detail_LastName","detail_HomePhoneNumber","detail_EmailAddress","detail_Address","detail_Address2","detail_Suburb","detail_Postcode","detail_State","detail_Country","detail_DateOfBirth","detail_Gen1","detail_Gen2","detail_Gen3","detail_Gen4","detail_Gen5","detail_Gen6","detail_Gen7","detail_Gen8","detail_Gen9","detail_Gen10","page_title","page_summary","page_body_text","page_image_url"];window.Cosmos.Config.ServiceUrl="http://cosmos.is:81/api/service/";window.Cosmos.Config.FormModuleUrl="http://cosmos.is:81/form/module/"}$(document).ready(function(){});Cosmos.Data.store=function(){this.map={};return{set:function(e,t){this.map[e]=t},get:function(e){return this.map[e]}}}();Cosmos.Data.newForm=function(){this._projectName="";this._projectPassword="";this._debugMode=false;this._cosmosFormWrapper="";this._moduleName="primary";this._editorModule=false;this.defineProjectSettings=function(e,t,n){n=typeof n!=="undefined"?n:false;this._projectName=e;this._projectPassword=t;this._debugMode=n};this.defineModuleName=function(e){this._moduleName=e};this.defineModuleAsEditor=function(e){this._editorModule=true};this.setupForm=function(e,t){var n=this;t=typeof t!=="undefined"?t:{};t.success=Cosmos.Data.Traverse(t,"success");var r="";if(this._editorModule){r="&editor_module=1"}this._cosmosFormWrapper=e;var i=Cosmos.Config.FormModuleUrl+"?project_name="+this._projectName+"&project_password="+this._projectPassword+"&module_name="+this._moduleName+"&ver="+(new Date).getTime()+r;$.ajax({type:"GET",url:i,success:function(e){$(n._cosmosFormWrapper).empty().append(e);if(t.success!==""){t.success(n._cosmosFormWrapper)}}})}};Cosmos.Data.ImageUploader=function(){this._projectName="";this._projectPassword="";this._debugMode="";this._moduleConfigObject="";this._imageUploadWrapper="";this._imageUploadFormWrapper="";this._varObj={};this._imageUploadFormArray=[];this._maximumFilesPerItem="";this._fileUpload={};this._fileUpload.begun=false;this._fileUpload.success=false;this._fileUpload.uploaded_image_id="";this._imageRescaleStyle="";this._imageFrameColor="";this._changeFileButtonHtml="";this.defineProjectSettings=function(e,t,n){n=typeof n!=="undefined"?n:false;this._projectName=e;this._projectPassword=t;this._debugMode=n};this.defineModuleConfigObject=function(e){this._moduleConfigObject=e};this.initAllUploadImageForms=function(e,t){imageUploadFormWrapper=e+" .cosmos-file-upload-form-wrapper .upload-image-form";this._imageUploadWrapper=e;var n=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.uploadFiles");if(n){this._maximumFilesPerItem=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.maximumFilesPerItem");if(this._maximumFilesPerItem!==""){for(var r=0,i=this._maximumFilesPerItem;r<i;r++){var s=$(imageUploadFormWrapper).clone();var o=s.attr("class");var u=s.attr("class")+(r+1);var a=s.attr("class")+(r+2);s.removeClass(o);s.addClass(u);s.appendTo(e);var f=e+" ."+u;t.nextImageUploadFormWrapper=e+" ."+a;var l=new Cosmos.Data.ImageUploader;l.defineModuleConfigObject(this._moduleConfigObject);l.defineProjectSettings(this._projectName,this._projectPassword,true);l.initUploadImageForm(e,f,t);this._imageUploadFormArray.push(l);if(r!==0){$(f).hide()}if(r===i-1){$(imageUploadFormWrapper).remove()}}}}else{if($(imageUploadFormWrapper)){$(imageUploadFormWrapper).remove()}}};this.updateAllImageForms=function(e){var t=Cosmos.Data.Traverse(e,"fileUploadModule.imageFields");this.clearAllImageForms();if(t!==""){for(var n=0,r=t.length;n<r;n++){var i=Cosmos.Data.Traverse(t[n],"thumbnailImage");var s=Cosmos.Data.Traverse(t[n],"uploaded_image_id");var o=Cosmos.Data.Traverse(t[n],"uploaded_image_caption");var u=Cosmos.Data.Traverse(t[n],"uploaded_image_source");this._imageUploadFormArray[n].addImageElement(i,s,o,u);if(n>r-2){$(this._imageUploadFormArray[n]._imageUploadFormWrapper+" .cosmos-file-attach-another-wrapper").show()}}}};this.clearAllImageForms=function(){for(var e=0,t=this._imageUploadFormArray.length;e<t;e++){this._imageUploadFormArray[e].deleteImageInstance();$(this._imageUploadFormArray[e]._imageUploadFormWrapper).hide()}if(this._imageUploadFormArray.length>0){$(this._imageUploadFormArray[0]._imageUploadFormWrapper).show()}};this.initUploadImageForm=function(e,t,n){this._imageUploadWrapper=e;this._imageUploadFormWrapper=t;this._varObj=n;n=typeof n!=="undefined"?n:{};n.external_reference_string=Cosmos.Data.Traverse(n,"external_reference_string");if(n.external_reference_string===""){n.external_reference_string="autoincrement"}n.complete=Cosmos.Data.Traverse(n,"complete");n.success=Cosmos.Data.Traverse(n,"success");n.progress=Cosmos.Data.Traverse(n,"progress");n.nextImageUploadFormWrapper=Cosmos.Data.Traverse(n,"nextImageUploadFormWrapper");n.beforeSubmit=Cosmos.Data.Traverse(n,"beforeSubmit");var r=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.fileUploadInputFields");var i=n.nextImageUploadFormWrapper;this._changeFileButtonHtml=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.changeFileButtonHtml");this._imageRescaleStyle=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.imageRescaleStyle");this._imageFrameColor=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.imageFrameColor");var s=this;var o={dataType:"xml",success:function(e){var t=$("uploaded_image_path_320",e).text();var r=$("uploaded_image_id",e).text();s.addImageElement(t,r,"","");if(n.success!==""){n.success(e,s._imageUploadFormWrapper)}if(this._debugMode)console.log(e);if($("ErrorMessage",e).text()){if(s._debugMode)console.log($("ErrorMessage",e).text())}else{if(s._debugMode)console.log("uploaded_image_id: "+$("uploaded_image_id",e).text()+" | uploaded_image_path_75: "+$("uploaded_image_path_75",e).text());if(s._debugMode)console.log("uploaded_image_caption: "+$("uploaded_image_caption",e).text());if(s._debugMode)console.log("uploaded_image_source: "+$("uploaded_image_source",e).text())}},complete:function(e){if(n.complete!==""){n.complete(e,s._imageUploadFormWrapper)}},beforeSubmit:function(){s._fileUpload.begun=true;$(s._imageUploadFormWrapper+" :submit").attr("disabled",true);$(s._imageUploadFormWrapper+" .cosmos-file-upload-progressbar-wrapper").show();$(s._imageUploadFormWrapper+" .cosmos-file-upload-buttonbar-wrapper").hide();$(s._imageUploadFormWrapper+" .cosmos-file-upload-delete-wrapper").hide();if(r!==""){$(s._imageUploadFormWrapper+" .cosmos-file-upload-text-attributes-wrapper").show()}if(n.beforeSubmit!==""){n.beforeSubmit(s._imageUploadFormWrapper)}if($(i).length!==0){$(s._imageUploadFormWrapper+" .cosmos-file-attach-another-wrapper").show()}},uploadProgress:function(e,t,r,i){if(n.progress!==""){n.progress(e,t,r,i,s._imageUploadFormWrapper)}$(s._imageUploadFormWrapper+" .cosmos-file-upload-progressbar-inner").css({width:i+"%"});if(i>99){$(s._imageUploadFormWrapper+" .cosmos-file-upload-finalizing-wrapper").show();$(s._imageUploadFormWrapper+" .cosmos-file-upload-progressbar-wrapper").hide()}}};$(s._imageUploadFormWrapper).ajaxForm(o);$("<input>").attr({type:"hidden",name:"external_reference_string",value:n.external_reference_string}).appendTo(s._imageUploadFormWrapper);$("<input>").attr({type:"hidden",name:"project_name",value:this._projectName}).appendTo(s._imageUploadFormWrapper);$("<input>").attr({type:"hidden",name:"project_password",value:this._projectPassword}).appendTo(s._imageUploadFormWrapper);var u=new Date;var a=u.getTime();$("<input>").attr({type:"hidden",name:"cacheBuster",value:a}).appendTo(s._imageUploadFormWrapper);$(s._imageUploadFormWrapper+' input[name="filedata"]').change(function(){if($(this).val()!==""){$(s._imageUploadFormWrapper).ajaxSubmit(o)}});$(s._imageUploadFormWrapper+" :submit").attr("disabled",false);$(s._imageUploadFormWrapper+" .cosmos-file-upload-buttonbar-wrapper").bind("click",function(){s.deleteImageInstance()});$(s._imageUploadFormWrapper+" .cosmos-file-upload-delete-button").bind("click",function(){s.deleteImageInstance()});$(s._imageUploadFormWrapper+" .cosmos-file-attach-another-button").bind("click",function(){$(s._imageUploadFormWrapper+" .cosmos-file-attach-another-wrapper").hide();if($(i).length!==0){$(i).show()}});s.defineUploadButtonText();var f=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.uploadFileTitleHtml");if(f!==""){$(this._imageUploadWrapper+" .cosmos-file-upload-title").html(f)}var l=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.uploadFileIntroductionHtml");if(l!==""){$(this._imageUploadWrapper+" .cosmos-file-upload-introduction").html(l)}var c=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.uploadFileFinalizingHtml");if(c!==""){$(this._imageUploadWrapper+" .cosmos-file-upload-finalizing-wrapper").html(c)}var h=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.attachAnotherFileButtonHtml");if(h!==""){$(this._imageUploadWrapper+" .cosmos-file-attach-another-button").html(h)}var p=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.deleteFileButtonHtml");if(p!==""){$(s._imageUploadFormWrapper+" .cosmos-file-upload-delete-button").html(p)}$(s._imageUploadFormWrapper+" .cosmos-file-upload-progressbar-wrapper").hide();$(s._imageUploadFormWrapper+" .cosmos-file-upload-delete-wrapper").hide();$(s._imageUploadFormWrapper+" .cosmos-file-upload-finalizing-wrapper").hide();var d=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.progressiveTextAttributes");if(!$.browser.msie&&d===true)$(s._imageUploadFormWrapper+" .cosmos-file-upload-text-attributes-wrapper").hide();$(s._imageUploadFormWrapper+" .cosmos-file-attach-another-wrapper").hide();var v=s._imageUploadFormWrapper+" .cosmos-file-upload-text-attributes-wrapper";if(r!==""){for(var m=0,g=r.length;m<g;m++){Cosmos.Data.createInputFeildElement(v,r[m])}}$("input, textarea").placeholder()};this.deleteImageInstance=function(){var e=this;$(e._imageUploadFormWrapper+" .cosmos-file-upload-text-attributes-wrapper input").not(":button, :submit, :reset, :hidden").val("");$(e._imageUploadFormWrapper+" #file").val("");$(e._imageUploadFormWrapper+" .cosmos-file-upload-delete-wrapper").hide();$(e._imageUploadFormWrapper+" .cosmos-file-upload-text-attributes-wrapper").hide();$(e._imageUploadFormWrapper+" .cosmos-file-attach-another-wrapper").hide();$(e._imageUploadFormWrapper+" .cosmos-file-change-button-text").addClass("cosmos-file-upload-button");$(e._imageUploadFormWrapper+" .cosmos-file-change-button-text").removeClass("cosmos-file-change-button-text");$(e._imageUploadFormWrapper+" .cosmos-image-placeholder").html("");e.defineUploadButtonText();e._fileUpload.begun=false;e._fileUpload.success=false;e._fileUpload.uploaded_image_id=""};this.defineUploadButtonText=function(){me=this;var e=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.uploadFileButtonHtml");if(e!==""){$(me._imageUploadFormWrapper+" .cosmos-file-upload-button .cosmos-file-upload-button-text").html(e)}};this.addImageElement=function(e,t,n,r){me=this;$(me._imageUploadFormWrapper).show();me._fileUpload.uploaded_image_id=t;me._fileUpload.begun=true;me._fileUpload.success=true;$(me._imageUploadFormWrapper+" .cosmos-file-upload-progressbar-wrapper").hide();$(me._imageUploadFormWrapper+" .cosmos-file-upload-buttonbar-wrapper").show();$(me._imageUploadFormWrapper+" .cosmos-file-upload-delete-wrapper").show();$(me._imageUploadFormWrapper+" .cosmos-file-upload-finalizing-wrapper").hide();var i=Cosmos.Data.Traverse(this._moduleConfigObject,"fileUploadModule.fileUploadInputFields");if(i!==""){$(me._imageUploadFormWrapper+" .cosmos-file-upload-text-attributes-wrapper").show()}if(me._changeFileButtonHtml!==""){$(me._imageUploadFormWrapper+" .cosmos-file-upload-button .cosmos-file-upload-button-text").html(me._changeFileButtonHtml)}$(me._imageUploadFormWrapper+" .cosmos-file-upload-button").addClass("cosmos-file-change-button-text");$(me._imageUploadFormWrapper+" .cosmos-file-upload-button").removeClass("cosmos-file-upload-button");var s=new Cosmos.Utils.ImageLoaderWithRescaleSlideShow(me._imageUploadFormWrapper+" .cosmos-image-placeholder",[{img:e,"background-color":me._imageFrameColor}],200,200,me._imageRescaleStyle,"centreEnabled","elementResizeListenerDisabled");if($(me._imageUploadFormWrapper+' input[name="uploaded_image_caption"]').length&&n!==""){$(me._imageUploadFormWrapper+' input[name="uploaded_image_caption"]').val(n)}if($(me._imageUploadFormWrapper+' input[name="uploaded_image_source"]').length&&r!==""){$(me._imageUploadFormWrapper+' input[name="uploaded_image_source"]').val(r)}};this.changeUploadImageFormExternalReferenceString=function(e,t){if($('input[name="external_reference_string"]')){$('input[name="external_reference_string"]').remove()}if($('input[name="project_name"]')){$('input[name="project_name"]').remove()}if($('input[name="project_password"]')){$('input[name="project_password"]').remove()}$("<input>").attr({type:"hidden",name:"external_reference_string",value:t}).appendTo(this._imageUploadFormWrapper);$("<input>").attr({type:"hidden",name:"project_name",value:this._projectName}).appendTo(this._imageUploadFormWrapper);$("<input>").attr({type:"hidden",name:"project_password",value:this._projectPassword}).appendTo(this._imageUploadFormWrapper)};this.update=function(e){me=this;e=typeof e!=="undefined"?e:{};e.external_reference_string=Cosmos.Data.Traverse(e,"external_reference_string");if(e.external_reference_string!==""){$(this._imageUploadFormWrapper+' input[name="external_reference_string"]').val(e.external_reference_string)}e.external_reference_string=$(this._imageUploadFormWrapper+' input[name="external_reference_string"]').val();e.unique_reference_id=Cosmos.Data.Traverse(e,"unique_reference_id");e.uploaded_image_id=me._fileUpload.uploaded_image_id;e.uploaded_image_caption=$(this._imageUploadFormWrapper+' input[name="uploaded_image_caption"]').val();e.uploaded_image_source=$(this._imageUploadFormWrapper+' input[name="uploaded_image_source"]').val();e.beforeSubmit=Cosmos.Data.Traverse(e,"beforeSubmit");e.success=Cosmos.Data.Traverse(e,"success");e.dataType=Cosmos.Data.Traverse(e,"dataType");if(e.dataType===""){e.dataType="json"}this._varObj=e;var t={};t.project_name=this._projectName;t.project_password=this._projectPassword;t.external_reference_string=e.external_reference_string;t.unique_reference_id=e.unique_reference_id;t.uploaded_image_id=e.uploaded_image_id;t.uploaded_image_caption=e.uploaded_image_caption;t.uploaded_image_source=e.uploaded_image_source;if(e.beforeSubmit!==""){e.beforeSubmit(t)}$.ajax({url:Cosmos.Config.ServiceUrl+"update_uploaded_image/",data:t,dataType:e.dataType,success:function(t){if(e.success!==""){e.success(t)}if(me._debugMode)console.log(t)}})}};Cosmos.Data.ItemForm=function(){this._projectName="";this._projectPassword="";this._debugMode="";this._moduleConfigObject="";this._varObj={};this._moduleName="primary";this._imageUploadFormArray=[];this._request={};this._request.begun=false;this._request.success=false;this._request.uploaded_image_id="";this._itemWrapper="";this._cosmosDataImageUploader="";this._cosmosDataThanks="";this.defineProjectSettings=function(e,t,n){n=typeof n!=="undefined"?n:false;this._projectName=e;this._projectPassword=t;this._debugMode=n};this.defineModuleConfigObject=function(e){this._moduleConfigObject=e};this.defineModuleName=function(e){this._moduleName=e};this.initItemForm=function(e,t){function c(){var e=true;for(var i=0,s=t.cosmosDataImageUploader._imageUploadFormArray.length;i<s;i++){var o=t.cosmosDataImageUploader._imageUploadFormArray[i]._fileUpload;if(o.begun===true&&o.success!==true){e=false}}if(e===true){n.submitItemData(r)}else{setTimeout(c,500)}}var n=this;this._itemWrapper=e;t=typeof t!=="undefined"?t:{};t.external_reference_string=Cosmos.Data.Traverse(t,"external_reference_string");t.complete=Cosmos.Data.Traverse(t,"complete");t.success=Cosmos.Data.Traverse(t,"success");t.beforeSubmit=Cosmos.Data.Traverse(t,"beforeSubmit");t.cosmosDataImageUploader=Cosmos.Data.Traverse(t,"cosmosDataImageUploader");this._cosmosDataImageUploader=t.cosmosDataImageUploader;t.cosmosDataThanks=Cosmos.Data.Traverse(t,"cosmosDataThanks");this._cosmosDataThanks=t.cosmosDataThanks;this._varObj=t;var r={success:function(e){n._request.success=true;if(t.success!==""){t.success(e,n._itemWrapper)}if(t.cosmosDataImageUploader!==""){for(var r=0,s=t.cosmosDataImageUploader._imageUploadFormArray.length;r<s;r++){var o=t.cosmosDataImageUploader._imageUploadFormArray[r]._fileUpload;if(o.success===true){$.extend(e,i);t.cosmosDataImageUploader._imageUploadFormArray[r].update(e)}}if(n._request.imagesRequiredToUpdate===0){n.gotoThanks()}}else{n.gotoThanks()}},beforeSubmit:function(){n._request.begun=true;n._request.imagesUpdated=0;n._request.imagesRequiredToUpdate=0;if(t.beforeSubmit!==""){t.beforeSubmit(n._itemWrapper)}}};var i={success:function(e){if(t.success!==""){t.success(e,n._itemWrapper)}n._request.imagesUpdated++;if(n._request.imagesUpdated===n._request.imagesRequiredToUpdate){n.gotoThanks()}},beforeSubmit:function(){if(t.beforeSubmit!==""){t.beforeSubmit(n._itemWrapper)}n._request.imagesRequiredToUpdate++}};var s=Cosmos.Data.Traverse(this._moduleConfigObject,"itemDetailsModule.itemDetailsTitleHtml");if(s!==""){$(e+" .cosmos-item-title").html(s)}var o=Cosmos.Data.Traverse(this._moduleConfigObject,"itemDetailsModule.itemDetailsIntroductionHtml");if(o!==""){$(e+" .cosmos-item-introduction").html(o)}var u=Cosmos.Data.Traverse(this._moduleConfigObject,"itemDetailsModule.submitItemButtonHtml");if(u!==""){$(e+" .cosmos-item-submit-button").html(u)}var a=Cosmos.Data.Traverse(this._moduleConfigObject,"itemDetailsModule.submittingItemHtml");if(u!==""){$(e+" .cosmos-item-submitting-item-wrapper").html(a);$(e+" .cosmos-item-submitting-item-wrapper").hide()}$("<input>").attr({type:"hidden",name:"external_reference_string",value:t.external_reference_string}).appendTo(e+" .cosmos-item-details-form-wrapper");$("<input>").attr({type:"hidden",name:"project_name",value:this._projectName}).appendTo(e+" .cosmos-item-details-form-wrapper");$("<input>").attr({type:"hidden",name:"project_password",value:this._projectPassword}).appendTo(e+" .cosmos-item-details-form-wrapper");var f=new Date;var l=f.getTime();$("<input>").attr({type:"hidden",name:"cacheBuster",value:l}).appendTo(e+" .cosmos-item-details-form-wrapper");$(e+" .cosmos-item-submit-button").bind("click",function(){$(e+" .cosmos-item-submit-wrapper").hide();$(e+" .cosmos-item-submitting-item-wrapper").show();if(t.cosmosDataImageUploader!==""){c()}else{n.submitItemData(r)}});var h=Cosmos.Data.Traverse(this._moduleConfigObject,"itemDetailsModule.itemDetailsInputFields");var p=e+" .cosmos-item-details-form-wrapper";if(h!==""){for(var d=0,v=h.length;d<v;d++){Cosmos.Data.createInputFeildElement(p,h[d])}}var m=e.split(" ");var g=m[0];$(g+" .cosmos-modal-close-button").bind("click",function(){n.hideModal()});$(g+" .cosmos-modal-backdrop").bind("click",function(){n.hideModal()});$(".cosmos-modal-open-"+this._projectName+"-"+this._moduleName).bind("click",function(){n.checkButtonDataAttributes(this);n.showModal()});$("input, textarea").placeholder()};this.submitItemData=function(e){var t=this;var n=true;var r=$(t._itemWrapper+" .cosmos-item-details-form-wrapper :input");var i=Cosmos.Data.Traverse(this._moduleConfigObject,"itemDetailsModule.itemDetailsInputFields");if(i!==""){for(var s=0,o=i.length;s<o;s++){var u=i[s];var a=Cosmos.Data.Traverse(u,"mandatoryField");var f=Cosmos.Data.Traverse(u,"fieldType");var l="";var c=t._itemWrapper+' .cosmos-item-details-form-wrapper [name="'+u.databaseLabel+'"]';if($(c).is(":checkbox")){l=$(c).prop("checked")}else{l=$(c).val();if(l==""){l=" ";$(c).val(" ")}}var h=$(c).parents(".cosmos-field-wrapper");h.removeClass("cosmos-validation-error");if(f!=="html"){if(a==true){if(l==false||l===""||l==" "){n=false;h.addClass("cosmos-validation-error")}}}}}if(n===true){var p={};r.each(function(){if($(this).is(":checkbox")){p[this.name]=$(this).prop("checked")}else{p[this.name]=$(this).val()}});p.cosmos_force=1;$.extend(p,e);var d=new Cosmos.Data.Item;d.defineProjectSettings(t._projectName,t._projectPassword,true);d.save(p)}else{$(t._itemWrapper+" .cosmos-item-submit-wrapper").show();$(t._itemWrapper+" .cosmos-item-submitting-item-wrapper").hide()}};this.showModal=function(){var e=this._itemWrapper.split(" ");var t=e[0];$(t+" .cosmos-modal").css("top",window.pageYOffset);$(t+" .cosmos-modal").show();$(t+" .cosmos-modal-backdrop").show()};this.hideModal=function(){var e=this._itemWrapper.split(" ");var t=e[0];$(t+" .cosmos-modal").hide();$(t+" .cosmos-modal-backdrop").hide()};this.checkButtonDataAttributes=function(e){me=this;if($(e).attr("data-config-object")){var t=window[$(e).attr("data-config-object")];this.updateItemForm(t);if(me._cosmosDataImageUploader){me._cosmosDataImageUploader.updateAllImageForms(t)}}};this.updateItemForm=function(e){me=this;e=typeof e!=="undefined"?e:{};var t=me._itemWrapper+" .cosmos-item-details-form-wrapper";$(t+" input").val("");$(t+" textarea").val("");var n=Cosmos.Data.Traverse(e,"itemDetailsModule.itemDetailsInputFields");for(var r=0,i=n.length;r<i;r++){Cosmos.Data.updateInputFeildElement(t,n[r])}$(t+" .cosmos-item-submit-wrapper").show();var s=Cosmos.Data.Traverse(e,"itemDetailsModule.external_reference_string");if(s!==""){}};this.gotoThanks=function(){me=this;var e=me._itemWrapper+" .cosmos-item-details-form-wrapper";$(e+" input").val("");$(e+" textarea").val("");$(me._itemWrapper+" .cosmos-item-submit-wrapper").show();$(me._itemWrapper+" .cosmos-item-submitting-item-wrapper").hide();$(me._itemWrapper).hide();if(this._cosmosDataImageUploader!==""){this._cosmosDataImageUploader.clearAllImageForms();$(this._cosmosDataImageUploader._imageUploadWrapper).hide()}if(this._cosmosDataThanks!==""){$(this._cosmosDataThanks._thanksWrapper).show()}if(Cosmos.Data.Traverse(this,"_cosmosDataThanks._moduleConfigObject.thanksModule.thanksAutoRefresh")){location.reload()}var t=Cosmos.Data.Traverse(this,"_cosmosDataThanks._moduleConfigObject.thanksModule.thanksAnchorTo");if(t){$("html,body").animate({scrollTop:$("#"+t).offset().top-80},200)}}};Cosmos.Data.Thanks=function(){this._projectName="";this._projectPassword="";this._debugMode="";this._moduleConfigObject="";this._varObj={};this._thanksWrapper="";this.defineProjectSettings=function(e,t,n){n=typeof n!=="undefined"?n:false;this._projectName=e;this._projectPassword=t;this._debugMode=n};this.defineModuleConfigObject=function(e){this._moduleConfigObject=e};this.initThanks=function(e,t){var n=this;this._thanksWrapper=e;t=typeof t!=="undefined"?t:{};var r=Cosmos.Data.Traverse(this._moduleConfigObject,"thanksModule.thanksTitleHtml");if(r!==""){$(this._thanksWrapper+" .cosmos-thanks-title").html(r)}var i=Cosmos.Data.Traverse(this._moduleConfigObject,"thanksModule.thanksIntroductionHtml");if(i!==""){$(this._thanksWrapper+" .cosmos-thanks-introduction").html(i)}$(this._thanksWrapper).hide()}};Cosmos.Data.updateInputFeildElement=function(e,t){$(e+' input[name="'+t.databaseLabel+'"]').val(t.valueText);$(e+' textarea[name="'+t.databaseLabel+'"]').val(t.valueText)};Cosmos.Data.createInputFeildElement=function(e,t){var n="";switch(t.fieldType){case"html":n+=t.userFacingHtml;break;case"checkbox":n+='<div class="cosmos-field-wrapper '+t.fieldSize+'">';n+='<input type="checkbox" name="'+t.databaseLabel+'" class="cosmos-checkbox"><div class="cosmos-checkbox-text">'+t.checkboxHtml+"</div>";n+="</div>";break;case"text":n+='<div class="cosmos-field-wrapper '+t.fieldSize+'">';if(t.userFacingLabel){n+='<div class="cosmos-field-label">'+t.userFacingLabel+"</div>"}var r="";if(t.readOnlyField){r+=' readonly="readonly" '}if(t.fieldSize!=="cosmos-field-tiny"&&t.fieldSize!=="cosmos-field-small"&&t.fieldSize!=="cosmos-field-medium"){var i="";if(t.fieldSize==="cosmos-field-large"){i=2}else if(t.fieldSize==="cosmos-field-xlarge"){i=3}else if(t.fieldSize==="cosmos-field-xxlarge"){i=4}else if(t.fieldSize==="cosmos-field-xxxlarge"){i=5}else if(t.fieldSize==="cosmos-field-xxxxlarge"){i=6}else if(t.fieldSize==="cosmos-field-xxxxxlarge"){i=7}else if(t.fieldSize==="cosmos-field-xxxxxxlarge"){i=8}else if(t.fieldSize==="cosmos-field-xxxxxxxlarge"){i=9}else if(t.fieldSize==="cosmos-field-xxxxxxxxlarge"){i=10}n+='<textarea name="'+t.databaseLabel+'" rows="'+i+'" class="cosmos-field" placeholder="'+t.placeholderText+'" '+r+' value="'+t.valueText+'" >'+t.valueText+"</textarea>"}else{n+='<input type="text" name="'+t.databaseLabel+'" class="cosmos-field" placeholder="'+t.placeholderText+'" value="'+t.valueText+'" '+r+" >"}n+="</div>";break;case 2:break;default:break}$(e).append(n)};Cosmos.Data.Traverse=function(e,t){t=t.split(".");while(e&&t.length){e=e[t.shift()]}if(typeof e=="undefined"){e=""}return e};Cosmos.Data.Item=function(){this._projectName="";this._projectPassword="";this._debugMode="";this._varObj={};this.defineProjectSettings=function(e,t,n){n=typeof n!=="undefined"?n:false;this._projectName=e;this._projectPassword=t;this._debugMode=n};this.save=function(e){me=this;e=typeof e!=="undefined"?e:{};e.external_reference_string=Cosmos.Data.Traverse(e,"external_reference_string");if(e.externalReferenceString!==""){e.external_reference_string=e.external_reference_string}e.beforeSubmit=Cosmos.Data.Traverse(e,"beforeSubmit");e.success=Cosmos.Data.Traverse(e,"success");e.dataType=Cosmos.Data.Traverse(e,"dataType");e.cosmos_force=Cosmos.Data.Traverse(e,"cosmos_force");if(e.dataType===""){e.dataType="json"}this._varObj=e;var t={};for(var n=0,r=Cosmos.Config.ReferenceDataArray.length;n<r;n++){var i=Cosmos.Config.ReferenceDataArray[n];var s=Cosmos.Data.Traverse(e,i);t[i]=s}t.project_name=this._projectName;t.project_password=this._projectPassword;t.external_reference_string=e.external_reference_string;t.cosmos_force=e.cosmos_force;var o=new Date;t.cacheBuster=o.getTime()+"_"+Math.random();if(e.beforeSubmit!==""){e.beforeSubmit(t)}$.ajax({url:Cosmos.Config.ServiceUrl+"save/",data:t,dataType:e.dataType,success:function(t){if(e.success!==""){e.success(t)}if(me._debugMode)console.log(t);if(t.ErrorMessage){alert(t.ErrorMessage)}}})};this.update=function(e){me=this;e=typeof e!=="undefined"?e:{};e.external_reference_string=Cosmos.Data.Traverse(e,"external_reference_string");if(e.external_reference_string!==""){e.external_reference_string=e.external_reference_string}e.beforeSubmit=Cosmos.Data.Traverse(e,"beforeSubmit");e.success=Cosmos.Data.Traverse(e,"success");e.dataType=Cosmos.Data.Traverse(e,"dataType");e.cosmos_force=Cosmos.Data.Traverse(e,"cosmos_force");if(e.dataType===""){e.dataType="json"}this._varObj=e;var t={};for(var n=0,r=Cosmos.Config.ReferenceDataArray.length;n<r;n++){var i=Cosmos.Config.ReferenceDataArray[n];var s=Cosmos.Data.Traverse(e,i);if(s!==""){t[i]=s}}t.project_name=this._projectName;t.project_password=this._projectPassword;t.external_reference_string=e.external_reference_string;t.cosmos_force=e.cosmos_force;if(e.beforeSubmit!==""){e.beforeSubmit(t)}$.ajax({url:Cosmos.Config.ServiceUrl+"update/",data:t,dataType:e.dataType,success:function(t){if(e.success!==""){e.success(t)}if(me._debugMode)console.log(t)}})};this.deactivate=function(e){this.activateOrDeactivate(e,"deactivate")};this.activate=function(e){this.activateOrDeactivate(e,"activate")};this.del=function(e){me=this;e=typeof e!=="undefined"?e:{};e.external_reference_string=Cosmos.Data.Traverse(e,"external_reference_string");if(e.external_reference_string!==""){e.external_reference_string=e.external_reference_string}e.beforeSubmit=Cosmos.Data.Traverse(e,"beforeSubmit");e.success=Cosmos.Data.Traverse(e,"success");e.dataType=Cosmos.Data.Traverse(e,"dataType");e.cosmos_force=Cosmos.Data.Traverse(e,"cosmos_force");if(e.dataType===""){e.dataType="json"}this._varObj=e;var t={};for(var n=0,r=Cosmos.Config.ReferenceDataArray.length;n<r;n++){var i=Cosmos.Config.ReferenceDataArray[n];var s=Cosmos.Data.Traverse(e,i);if(s!==""){t[i]=s}}t.project_name=this._projectName;t.project_password=this._projectPassword;t.external_reference_string=e.external_reference_string;t.cosmos_force=e.cosmos_force;if(e.beforeSubmit!==""){e.beforeSubmit(t)}$.ajax({url:Cosmos.Config.ServiceUrl+"delete/",data:t,dataType:e.dataType,success:function(t){if(e.success!==""){e.success(t)}if(me._debugMode)console.log(t)}})};this.activateOrDeactivate=function(e,t){e=typeof e!=="undefined"?e:{};e.external_reference_string=Cosmos.Data.Traverse(e,"external_reference_string");if(e.external_reference_string!==""){e.external_reference_string=e.external_reference_string}e.beforeSubmit=Cosmos.Data.Traverse(e,"beforeSubmit");e.success=Cosmos.Data.Traverse(e,"success");e.dataType=Cosmos.Data.Traverse(e,"dataType");if(e.dataType===""){e.dataType="json"}if(e.beforeSubmit!==""){e.beforeSubmit(n)}var n={};n.project_name=this._projectName;n.project_password=this._projectPassword;n.external_reference_string=e.external_reference_string;$.ajax({url:Cosmos.Config.ServiceUrl+"service/"+t+"/",data:n,dataType:e.dataType,success:function(t){if(e.success!==""){e.success(t)}if(me._debugMode)console.log(t)}})}};(function(e,t,n){function f(e){var t={},r=/^jQuery\d+$/;n.each(e.attributes,function(e,n){if(n.specified&&!r.test(n.name)){t[n.name]=n.value}});return t}function l(e,r){var i=this,s=n(i);if(i.value==s.attr("placeholder")&&s.hasClass("placeholder")){if(s.data("placeholder-password")){s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id"));if(e===true){return s[0].value=r}s.focus()}else{i.value="";s.removeClass("placeholder");i==t.activeElement&&i.select()}}}function c(){var e,t=this,r=n(t),i=r,s=this.id;if(t.value==""){if(t.type=="password"){if(!r.data("placeholder-textinput")){try{e=r.clone().attr({type:"text"})}catch(o){e=n("<input>").attr(n.extend(f(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":true,"placeholder-id":s}).bind("focus.placeholder",l);r.data({"placeholder-textinput":e,"placeholder-id":s}).before(e)}r=r.removeAttr("id").hide().prev().attr("id",s).show()}r.addClass("placeholder");r[0].value=r.attr("placeholder")}else{r.removeClass("placeholder")}}var r="placeholder"in t.createElement("input"),i="placeholder"in t.createElement("textarea"),s=n.fn,o=n.valHooks,u,a;if(r&&i){a=s.placeholder=function(){return this};a.input=a.textarea=true}else{a=s.placeholder=function(){var e=this;e.filter((r?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":l,"blur.placeholder":c}).data("placeholder-enabled",true).trigger("blur.placeholder");return e};a.input=r;a.textarea=i;u={get:function(e){var t=n(e);return t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,r){var i=n(e);if(!i.data("placeholder-enabled")){return e.value=r}if(r==""){e.value=r;if(e!=t.activeElement){c.call(e)}}else if(i.hasClass("placeholder")){l.call(e,true,r)||(e.value=r)}else{e.value=r}return i}};r||(o.input=u);i||(o.textarea=u);n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(l);setTimeout(function(){e.each(c)},10)})});n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})})}})(this,document,jQuery);(function(e){e.fn.filestyle=function(t){var n={width:250};if(t){e.extend(n,t)}return this.each(function(){var t=this;var r=e("<div>").css({width:n.imagewidth+"px",height:n.imageheight+"px",background:"url("+n.image+") 0 0 no-repeat","background-position":"right",display:"inline",position:"absolute",overflow:"hidden"});var i=e('<input class="file">').addClass(e(t).attr("class")).css({display:"inline",width:n.width+"px"});e(t).before(i);e(t).wrap(r);e(t).css({position:"relative",height:n.imageheight+"px",width:n.width+"px",display:"inline",cursor:"pointer",opacity:"0.0"});e(t).addClass("upload-button");if(e.browser.mozilla){if(/Win/.test(navigator.platform)){e(t).css("margin-left","-142px")}else{e(t).css("margin-left","-168px")}}else{e(t).css("margin-left",n.imagewidth-n.width+"px")}e(t).bind("change",function(){i.val(e(t).val())})})}})(jQuery);(function(e){"use strict";function n(t){var n=t.data;if(!t.isDefaultPrevented()){t.preventDefault();e(this).ajaxSubmit(n)}}function r(t){var n=t.target;var r=e(n);if(!r.is(":submit,input:image")){var i=r.closest(":submit");if(i.length===0){return}n=i[0]}var s=this;s.clk=n;if(n.type=="image"){if(t.offsetX!==undefined){s.clk_x=t.offsetX;s.clk_y=t.offsetY}else if(typeof e.fn.offset=="function"){var o=r.offset();s.clk_x=t.pageX-o.left;s.clk_y=t.pageY-o.top}else{s.clk_x=t.pageX-n.offsetLeft;s.clk_y=t.pageY-n.offsetTop}}setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function i(){if(!e.fn.ajaxSubmit.debug)return;var t="[jquery.form] "+Array.prototype.join.call(arguments,"");if(window.console&&window.console.log){window.console.log(t)}else if(window.opera&&window.opera.postError){window.opera.postError(t)}}var t={};t.fileapi=e("<input type='file'/>").get(0).files!==undefined;t.formdata=window.FormData!==undefined;e.fn.ajaxSubmit=function(n){function T(t){var n=e.param(t).split("&");var r=n.length;var i={};var s,o;for(s=0;s<r;s++){o=n[s].split("=");i[decodeURIComponent(o[0])]=decodeURIComponent(o[1])}return i}function N(t){var i=new FormData;for(var s=0;s<t.length;s++){i.append(t[s].name,t[s].value)}if(n.extraData){var o=T(n.extraData);for(var u in o)if(o.hasOwnProperty(u))i.append(u,o[u])}n.data=null;var a=e.extend(true,{},e.ajaxSettings,n,{contentType:false,processData:false,cache:false,type:r||"POST"});if(n.uploadProgress){a.xhr=function(){var e=jQuery.ajaxSettings.xhr();if(e.upload){e.upload.onprogress=function(e){var t=0;var r=e.loaded||e.position;var i=e.total;if(e.lengthComputable){t=Math.ceil(r/i*100)}n.uploadProgress(e,r,i,t)}}return e}}a.data=null;var f=a.beforeSend;a.beforeSend=function(e,t){t.data=i;if(f)f.call(this,e,t)};return e.ajax(a)}function C(t){function T(e){var t=e.contentWindow?e.contentWindow.document:e.contentDocument?e.contentDocument:e.document;return t}function k(){function o(){try{var e=T(d).readyState;i("state = "+e);if(e&&e.toLowerCase()=="uninitialized")setTimeout(o,50)}catch(t){i("Server abort: ",t," (",t.name,")");_(x);if(b)clearTimeout(b);b=undefined}}var t=u.attr("target"),n=u.attr("action");s.setAttribute("target",h);if(!r){s.setAttribute("method","POST")}if(n!=f.url){s.setAttribute("action",f.url)}if(!f.skipEncodingOverride&&(!r||/post/i.test(r))){u.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"})}if(f.timeout){b=setTimeout(function(){y=true;_(S)},f.timeout)}var a=[];try{if(f.extraData){for(var l in f.extraData){if(f.extraData.hasOwnProperty(l)){if(e.isPlainObject(f.extraData[l])&&f.extraData[l].hasOwnProperty("name")&&f.extraData[l].hasOwnProperty("value")){a.push(e('<input type="hidden" name="'+f.extraData[l].name+'">').attr("value",f.extraData[l].value).appendTo(s)[0])}else{a.push(e('<input type="hidden" name="'+l+'">').attr("value",f.extraData[l]).appendTo(s)[0])}}}}if(!f.iframeTarget){p.appendTo("body");if(d.attachEvent)d.attachEvent("onload",_);else d.addEventListener("load",_,false)}setTimeout(o,15);s.submit()}finally{s.setAttribute("action",n);if(t){s.setAttribute("target",t)}else{u.removeAttr("target")}e(a).remove()}}function _(t){if(v.aborted||M){return}try{A=T(d)}catch(n){i("cannot access response document: ",n);t=x}if(t===S&&v){v.abort("timeout");E.reject(v,"timeout");return}else if(t==x&&v){v.abort("server abort");E.reject(v,"error","server abort");return}if(!A||A.location.href==f.iframeSrc){if(!y)return}if(d.detachEvent)d.detachEvent("onload",_);else d.removeEventListener("load",_,false);var r="success",s;try{if(y){throw"timeout"}var o=f.dataType=="xml"||A.XMLDocument||e.isXMLDoc(A);i("isXml="+o);if(!o&&window.opera&&(A.body===null||!A.body.innerHTML)){if(--O){i("requeing onLoad callback, DOM not available");setTimeout(_,250);return}}var u=A.body?A.body:A.documentElement;v.responseText=u?u.innerHTML:null;v.responseXML=A.XMLDocument?A.XMLDocument:A;if(o)f.dataType="xml";v.getResponseHeader=function(e){var t={"content-type":f.dataType};return t[e]};if(u){v.status=Number(u.getAttribute("status"))||v.status;v.statusText=u.getAttribute("statusText")||v.statusText}var a=(f.dataType||"").toLowerCase();var l=/(json|script|text)/.test(a);if(l||f.textarea){var h=A.getElementsByTagName("textarea")[0];if(h){v.responseText=h.value;v.status=Number(h.getAttribute("status"))||v.status;v.statusText=h.getAttribute("statusText")||v.statusText}else if(l){var m=A.getElementsByTagName("pre")[0];var g=A.getElementsByTagName("body")[0];if(m){v.responseText=m.textContent?m.textContent:m.innerText}else if(g){v.responseText=g.textContent?g.textContent:g.innerText}}}else if(a=="xml"&&!v.responseXML&&v.responseText){v.responseXML=D(v.responseText)}try{L=H(v,a,f)}catch(t){r="parsererror";v.error=s=t||r}}catch(t){i("error caught: ",t);r="error";v.error=s=t||r}if(v.aborted){i("upload aborted");r=null}if(v.status){r=v.status>=200&&v.status<300||v.status===304?"success":"error"}if(r==="success"){if(f.success)f.success.call(f.context,L,"success",v);E.resolve(v.responseText,"success",v);if(c)e.event.trigger("ajaxSuccess",[v,f])}else if(r){if(s===undefined)s=v.statusText;if(f.error)f.error.call(f.context,v,r,s);E.reject(v,"error",s);if(c)e.event.trigger("ajaxError",[v,f,s])}if(c)e.event.trigger("ajaxComplete",[v,f]);if(c&&!--e.active){e.event.trigger("ajaxStop")}if(f.complete)f.complete.call(f.context,v,r);M=true;if(f.timeout)clearTimeout(b);setTimeout(function(){if(!f.iframeTarget)p.remove();v.responseXML=null},100)}var s=u[0],o,a,f,c,h,p,d,v,m,g,y,b;var w=!!e.fn.prop;var E=e.Deferred();if(e(":input[name=submit],:input[id=submit]",s).length){alert('Error: Form elements must not have name or id of "submit".');E.reject();return E}if(t){for(a=0;a<l.length;a++){o=e(l[a]);if(w)o.prop("disabled",false);else o.removeAttr("disabled")}}f=e.extend(true,{},e.ajaxSettings,n);f.context=f.context||f;h="jqFormIO"+(new Date).getTime();if(f.iframeTarget){p=e(f.iframeTarget);g=p.attr("name");if(!g)p.attr("name",h);else h=g}else{p=e('<iframe name="'+h+'" src="'+f.iframeSrc+'" />');p.css({position:"absolute",top:"-1000px",left:"-1000px"})}d=p[0];v={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var n=t==="timeout"?"timeout":"aborted";i("aborting upload... "+n);this.aborted=1;if(d.contentWindow.document.execCommand){try{d.contentWindow.document.execCommand("Stop")}catch(r){}}p.attr("src",f.iframeSrc);v.error=n;if(f.error)f.error.call(f.context,v,n,t);if(c)e.event.trigger("ajaxError",[v,f,n]);if(f.complete)f.complete.call(f.context,v,n)}};c=f.global;if(c&&0===e.active++){e.event.trigger("ajaxStart")}if(c){e.event.trigger("ajaxSend",[v,f])}if(f.beforeSend&&f.beforeSend.call(f.context,v,f)===false){if(f.global){e.active--}E.reject();return E}if(v.aborted){E.reject();return E}m=s.clk;if(m){g=m.name;if(g&&!m.disabled){f.extraData=f.extraData||{};f.extraData[g]=m.value;if(m.type=="image"){f.extraData[g+".x"]=s.clk_x;f.extraData[g+".y"]=s.clk_y}}}var S=1;var x=2;var N=e("meta[name=csrf-token]").attr("content");var C=e("meta[name=csrf-param]").attr("content");if(C&&N){f.extraData=f.extraData||{};f.extraData[C]=N}if(f.forceSync){k()}else{setTimeout(k,10)}var L,A,O=50,M;var D=e.parseXML||function(e,t){if(window.ActiveXObject){t=new ActiveXObject("Microsoft.XMLDOM");t.async="false";t.loadXML(e)}else{t=(new DOMParser).parseFromString(e,"text/xml")}return t&&t.documentElement&&t.documentElement.nodeName!="parsererror"?t:null};var P=e.parseJSON||function(e){return window["eval"]("("+e+")")};var H=function(t,n,r){var i=t.getResponseHeader("content-type")||"",s=n==="xml"||!n&&i.indexOf("xml")>=0,o=s?t.responseXML:t.responseText;if(s&&o.documentElement.nodeName==="parsererror"){if(e.error)e.error("parsererror")}if(r&&r.dataFilter){o=r.dataFilter(o,n)}if(typeof o==="string"){if(n==="json"||!n&&i.indexOf("json")>=0){o=P(o)}else if(n==="script"||!n&&i.indexOf("javascript")>=0){e.globalEval(o)}}return o};return E}if(!this.length){i("ajaxSubmit: skipping submit process - no element selected");return this}var r,s,o,u=this;if(typeof n=="function"){n={success:n}}r=this.attr("method");s=this.attr("action");o=typeof s==="string"?e.trim(s):"";o=o||window.location.href||"";if(o){o=(o.match(/^([^#]+)/)||[])[1]}n=e.extend(true,{url:o,success:e.ajaxSettings.success,type:r||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},n);var a={};this.trigger("form-pre-serialize",[this,n,a]);if(a.veto){i("ajaxSubmit: submit vetoed via form-pre-serialize trigger");return this}if(n.beforeSerialize&&n.beforeSerialize(this,n)===false){i("ajaxSubmit: submit aborted via beforeSerialize callback");return this}var f=n.traditional;if(f===undefined){f=e.ajaxSettings.traditional}var l=[];var c,h=this.formToArray(n.semantic,l);if(n.data){n.extraData=n.data;c=e.param(n.data,f)}if(n.beforeSubmit&&n.beforeSubmit(h,this,n)===false){i("ajaxSubmit: submit aborted via beforeSubmit callback");return this}this.trigger("form-submit-validate",[h,this,n,a]);if(a.veto){i("ajaxSubmit: submit vetoed via form-submit-validate trigger");return this}var p=e.param(h,f);if(c){p=p?p+"&"+c:c}if(n.type.toUpperCase()=="GET"){n.url+=(n.url.indexOf("?")>=0?"&":"?")+p;n.data=null}else{n.data=p}var d=[];if(n.resetForm){d.push(function(){u.resetForm()})}if(n.clearForm){d.push(function(){u.clearForm(n.includeHidden)})}if(!n.dataType&&n.target){var v=n.success||function(){};d.push(function(t){var r=n.replaceTarget?"replaceWith":"html";e(n.target)[r](t).each(v,arguments)})}else if(n.success){d.push(n.success)}n.success=function(e,t,r){var i=n.context||this;for(var s=0,o=d.length;s<o;s++){d[s].apply(i,[e,t,r||u,u])}};var m=e("input:file:enabled[value]",this);var g=m.length>0;var y="multipart/form-data";var b=u.attr("enctype")==y||u.attr("encoding")==y;var w=t.fileapi&&t.formdata;i("fileAPI :"+w);var E=(g||b)&&!w;var S;if(n.iframe!==false&&(n.iframe||E)){if(n.closeKeepAlive){e.get(n.closeKeepAlive,function(){S=C(h)})}else{S=C(h)}}else if((g||b)&&w){S=N(h)}else{S=e.ajax(n)}u.removeData("jqxhr").data("jqxhr",S);for(var x=0;x<l.length;x++)l[x]=null;this.trigger("form-submit-notify",[this,n]);return this};e.fn.ajaxForm=function(t){t=t||{};t.delegation=t.delegation&&e.isFunction(e.fn.on);if(!t.delegation&&this.length===0){var s={s:this.selector,c:this.context};if(!e.isReady&&s.s){i("DOM not ready, queuing ajaxForm");e(function(){e(s.s,s.c).ajaxForm(t)});return this}i("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)"));return this}if(t.delegation){e(document).off("submit.form-plugin",this.selector,n).off("click.form-plugin",this.selector,r).on("submit.form-plugin",this.selector,t,n).on("click.form-plugin",this.selector,t,r);return this}return this.ajaxFormUnbind().bind("submit.form-plugin",t,n).bind("click.form-plugin",t,r)};e.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};e.fn.formToArray=function(n,r){var i=[];if(this.length===0){return i}var s=this[0];var o=n?s.getElementsByTagName("*"):s.elements;if(!o){return i}var u,a,f,l,c,h,p;for(u=0,h=o.length;u<h;u++){c=o[u];f=c.name;if(!f){continue}if(n&&s.clk&&c.type=="image"){if(!c.disabled&&s.clk==c){i.push({name:f,value:e(c).val(),type:c.type});i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y})}continue}l=e.fieldValue(c,true);if(l&&l.constructor==Array){if(r)r.push(c);for(a=0,p=l.length;a<p;a++){i.push({name:f,value:l[a]})}}else if(t.fileapi&&c.type=="file"&&!c.disabled){if(r)r.push(c);var d=c.files;if(d.length){for(a=0;a<d.length;a++){i.push({name:f,value:d[a],type:c.type})}}else{i.push({name:f,value:"",type:c.type})}}else if(l!==null&&typeof l!="undefined"){if(r)r.push(c);i.push({name:f,value:l,type:c.type,required:c.required})}}if(!n&&s.clk){var v=e(s.clk),m=v[0];f=m.name;if(f&&!m.disabled&&m.type=="image"){i.push({name:f,value:v.val()});i.push({name:f+".x",value:s.clk_x},{name:f+".y",value:s.clk_y})}}return i};e.fn.formSerialize=function(t){return e.param(this.formToArray(t))};e.fn.fieldSerialize=function(t){var n=[];this.each(function(){var r=this.name;if(!r){return}var i=e.fieldValue(this,t);if(i&&i.constructor==Array){for(var s=0,o=i.length;s<o;s++){n.push({name:r,value:i[s]})}}else if(i!==null&&typeof i!="undefined"){n.push({name:this.name,value:i})}});return e.param(n)};e.fn.fieldValue=function(t){for(var n=[],r=0,i=this.length;r<i;r++){var s=this[r];var o=e.fieldValue(s,t);if(o===null||typeof o=="undefined"||o.constructor==Array&&!o.length){continue}if(o.constructor==Array)e.merge(n,o);else n.push(o)}return n};e.fieldValue=function(t,n){var r=t.name,i=t.type,s=t.tagName.toLowerCase();if(n===undefined){n=true}if(n&&(!r||t.disabled||i=="reset"||i=="button"||(i=="checkbox"||i=="radio")&&!t.checked||(i=="submit"||i=="image")&&t.form&&t.form.clk!=t||s=="select"&&t.selectedIndex==-1)){return null}if(s=="select"){var o=t.selectedIndex;if(o<0){return null}var u=[],a=t.options;var f=i=="select-one";var l=f?o+1:a.length;for(var c=f?o:0;c<l;c++){var h=a[c];if(h.selected){var p=h.value;if(!p){p=h.attributes&&h.attributes["value"]&&!h.attributes["value"].specified?h.text:h.value}if(f){return p}u.push(p)}}return u}return e(t).val()};e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})};e.fn.clearFields=e.fn.clearInputs=function(t){var n=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var r=this.type,i=this.tagName.toLowerCase();if(n.test(r)||i=="textarea"){this.value=""}else if(r=="checkbox"||r=="radio"){this.checked=false}else if(i=="select"){this.selectedIndex=-1}else if(t){if(t===true&&/hidden/.test(r)||typeof t=="string"&&e(this).is(t))this.value=""}})};e.fn.resetForm=function(){return this.each(function(){if(typeof this.reset=="function"||typeof this.reset=="object"&&!this.reset.nodeType){this.reset()}})};e.fn.enable=function(e){if(e===undefined){e=true}return this.each(function(){this.disabled=!e})};e.fn.selected=function(t){if(t===undefined){t=true}return this.each(function(){var n=this.type;if(n=="checkbox"||n=="radio"){this.checked=t}else if(this.tagName.toLowerCase()=="option"){var r=e(this).parent("select");if(t&&r[0]&&r[0].type=="select-one"){r.find("option").selected(false)}this.selected=t}})};e.fn.ajaxSubmit.debug=false})(jQuery)